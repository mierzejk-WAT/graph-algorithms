var Helper;(function(n){function t(n){return n.preventDefault(),n.cancelBubble=!0,n.stopPropagation(),!1}function i(n,t){var r,u,i;for(t===void 0&&(t=0),r=[],u=Number(n)+t,i=t;i<u;i++)r.push(i);return r}function u(n,t,i){i===void 0&&(i=1);var u=2*Math.PI*n/t;return new r(i*Math.sin(u),-1*Math.cos(u))}n.Halt=t;n.Range=i;var r=function(){function n(n,t){this.x=n;this.y=t}return Object.defineProperty(n.prototype,"X",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Y",{get:function(){return this.y},enumerable:!0,configurable:!0}),n}();n.GetCoordinates=u})(Helper||(Helper={}));Array.prototype.unique=function(){for(var t={},r=this.length,i=[],n=0;n<r;n+=1)t[this[n]]=this[n];for(n in t)i.push(t[n]);return i};var Alternative=function(){function n(n){var t=this;this._index=n;this._variables=ko.observableArray();this._isEmpty=ko.pureComputed(function(){return 0===t._variables().length});this._reduce=function(n,t){return n+(1<<t-1)}}return Object.defineProperty(n.prototype,"Index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsEmpty",{get:function(){return this._isEmpty},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Variables",{get:function(){return this._variables},enumerable:!0,configurable:!0}),n.prototype.SwitchVariable=function(n,t,i){if(-1===$.inArray(t,this._variables.peek())){for(var u=this._variables.peek(),r=0;r<u.length;r++)if(u[r]>t)break;this._variables.splice(r,0,t);$(n.currentTarget).addClass("set")}else this._variables.remove(t),$(n.currentTarget).removeClass();return(i||"")&&i.Calculate(),Helper.Halt(n)},n.prototype.GetAlternative=function(){return this._variables.peek().reduce(this._reduce,0)},n}(),Base=function(){function n(n,t){this._variables=n;this._isCore=t}return Object.defineProperty(n.prototype,"Variables",{get:function(){return this._variables},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsCore",{get:function(){return this._isCore},enumerable:!0,configurable:!0}),n}(),Grid=function(){function n(n,t){var i=this;n===void 0&&(n=0);t===void 0&&(t=0);this._alternatives=ko.observable([]);this._variables=ko.observable([]);this._formula=ko.observable([]);this._visible=ko.pureComputed(function(){return i._alternatives().some(function(n){return!n.IsEmpty()})});this._setSigmaUp=function(){this._sigma=sigma.init(document.getElementById("graph"));this._sigma.configProperties({drawHoverNodes:!1,drawActiveNodes:!1}).drawingProperties({defaultLabelColor:"#FFF",defaultLabelSize:14,font:"Lato, Helvetica Neue",defaultEdgeType:"curve",defaultEdgeArrow:"target",defaultEdgeColor:"#333"}).graphProperties({minNodeSize:10,maxNodeSize:20,minEdgeSize:5,maxEdgeSize:5,scalingMode:"inside"}).mouseProperties({mouseEnabled:!1})};this._variablesNumber=ko.observable(n);this._calculatedVariablesNumber=ko.observable(n);this._alternativesNumber=ko.observable(t);this._enabled=ko.pureComputed(function(){return i._alternatives().length>0});this._isGraph=ko.pureComputed(function(){return i._calculatedVariablesNumber()>0&&i._calculatedVariablesNumber()===i._alternatives().length&&i._alternatives().every(function(n){return-1!==n.Variables().indexOf(n.Index)})});this._setSigmaUp()}return n.prototype.SetVariables=function(){this._sigma.emptyGraph();this._sigma.resize();this._sigma.refresh();this._sigma.draw();this._variables(Helper.Range(this._variablesNumber(),1));this._calculatedVariablesNumber(this._variables.peek().length);this._alternatives.valueWillMutate();var n=this._alternatives();n.length=0;Helper.Range(this._alternativesNumber(),1).forEach(function(t){n.push(new Alternative(t))});this._alternatives.valueHasMutated()},n.prototype.Calculate=function(n,t){var f=this,r=$.grep(this._alternatives.peek().map(function(n){return n.GetAlternative()}),function(n){return n>0}),u,i;return r.length>0&&(u=this._getMinimalImplicants.call(this,r),i=[],u.forEach(function(n){i.every(function(t){return(t&n)!==t})&&i.push(n)}),this._formula(i.map(function(n){return f._getBinary(n)}))),t||""?Helper.Halt(t):!1},n.prototype.Draw=function(n,t){var r=this,i;return this._sigma.emptyGraph(),i=this._alternatives.peek(),i.forEach(function(n){var t=Helper.GetCoordinates(n.Index-1,i.length,1.1);r._sigma.addNode("N"+n.Index,{label:n.Index.toString(),x:(t.X+1.1)/2.2,y:(t.Y+1.1)/2.2,size:1,color:"#222"})}),i.forEach(function(n){$.grep(n.Variables.peek(),function(t){return n.Index!==t}).forEach(function(t){r._sigma.addEdge("E_"+n.Index+"->"+t,"N"+n.Index,"N"+t,{arrow:""})})}),this._sigma.resize(),this._sigma.refresh(),this._sigma.draw(),t||""?Helper.Halt(t):!1},Object.defineProperty(n.prototype,"AlternativesNumber",{get:function(){return this._alternativesNumber},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Formula",{get:function(){return this._formula},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"VariablesNumber",{get:function(){return this._variablesNumber},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Alternatives",{get:function(){return this._alternatives},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Variables",{get:function(){return this._variables},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Enabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsGraph",{get:function(){return this._isGraph},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Visible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"CalculatedVariablesNumber",{get:function(){return this._calculatedVariablesNumber},enumerable:!0,configurable:!0}),n.prototype._getBinary=function(t){for(var i=[],r=1,f=1,u,e;t>0;)0!=(r&t)&&(i.push(f),t^=r),f++,r=r<<1;return u=this._alternatives.peek(),e=this._calculatedVariablesNumber.peek(),new Base(i,e===u.length?i.every(function(t){return!n._hasSiblings($.grep(i,function(n){return t!==n}),u[t-1].Variables.peek())}):!1)},n.prototype._getMinimalImplicants=function(n){return $.grep(Helper.Range(Math.pow(2,this._variablesNumber.peek())-1,1),function(t){return n.every(function(n){return(t&n)>0})})},n._hasSiblings=function(n,t){return n.some(function(n){return-1!==$.inArray(n,t)})},n}(),State=function(){function n(n,t,i){this.a=n;this.v=t;this.s=i}return n.prototype.Validate=function(){var n=this;return typeof this.a!="number"||typeof this.v!="number"||this.a<1||this.v<1?!1:(this.s instanceof Array&&this.s.length<=this.a&&this.s.every(function(t){return Math.max.apply(Math,t)<=n.v}))?!0:!1},n.prototype.Set=function(n){this.s.forEach(function(t,i){t.unique().forEach(function(t){var r=n.find("tr:nth-child("+t+")>td:eq("+i+")");r.click()})});grid.IsGraph.peek()&&grid.Draw();Array},n}(),grid,state=new State;(function(){var queryString=document.URL.split("?"),parameter=queryString.length===2?decodeURIComponent(queryString[1]):undefined,saved;if(typeof parameter!="undefined")try{eval("saved="+parameter);state=new State(saved.a,saved.v,saved.s)}catch(error){}})();ko.components.register("function-header",{template:'<span class="fnc">f<span class="sub">(G)<\/span>(v<span class="sup" data-bind="text: \'(\' + number + \')\'" />)=<\/span>'});$(function(){grid=state.Validate()?new Grid(state.v,state.a):new Grid;ko.applyBindings(grid);state.Validate()&&(grid.SetVariables(),state.Set($("#placeholder>table>tbody")));$(document.body).css("visibility","visible")});
//# sourceMappingURL=base2.min.js.map
